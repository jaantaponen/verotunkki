(this.webpackJsonpverohommeli=this.webpackJsonpverohommeli||[]).push([[0],{189:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(44),i=a.n(r),o=a(253),c=a(193),s=a(266),u=a(16),l=a(267),d=a(268),p=a(269),b=a(265),f=a(246),m=a(2),h=function(){return Object(m.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,width:"sm",sx:{pt:2},children:[Object(m.jsx)(b.a,{alignSelf:"center",align:"center",component:"p",sx:{pt:4},children:"Tarkista tiedot aina itse virheiden varalta."}),Object(m.jsx)(b.a,{alignSelf:"center",align:"center",component:"p",sx:{pt:0},children:"Olet itse vastuussa omista veroistasi."}),Object(m.jsx)(b.a,{alignSelf:"center",align:"center",component:"p",sx:{pt:0},children:"Sivustolle l\xe4hett\xe4mi\xe4si tiedostoja k\xe4sitell\xe4\xe4n vain paikallisesti selaimessasi."}),Object(m.jsxs)(b.a,{variant:"body2",sx:{pt:2},color:"text.secondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(p.a,{color:"inherit",href:"https://verotunkki.fi/",children:"Verotunkki"})," ",(new Date).getFullYear(),"."]})]})},j=a(133),x=a(280),v=a(271),O=function(){var e=Object(u.f)(),t=Object(j.a)({typography:{fontSize:14}});return Object(m.jsxs)(x.a,{theme:t,children:[Object(m.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(m.jsx)(o.a,{}),Object(m.jsxs)(s.a,{component:"main",maxWidth:"sm",sx:{pt:8,pb:4},children:[Object(m.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:6,width:"sm",children:[Object(m.jsx)(b.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"VEROTUNKKI"}),Object(m.jsx)(b.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:3},component:"p",children:"Verotunkki laskee puolestasi luovutusvoitot ja -tappiot, ja ulostaa verottajayhteensopivan rapsan. Hyv\xe4 el\xe4m\xe4 vittu"}),Object(m.jsx)(b.a,{alignSelf:"center",variant:"h6",component:"p",sx:{pt:2},children:"Valitse verotettavan tulon tyyppi:"}),Object(m.jsx)(l.a,{sx:{width:450},onClick:function(){e("/crypto")},children:Object(m.jsx)(v.a,{children:Object(m.jsxs)(d.a,{children:[Object(m.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Virtuaalivaluutat"}),Object(m.jsx)(b.a,{variant:"body2",color:"text.secondary",children:"Perus hyv\xe4 Ethereum."}),Object(m.jsxs)(b.a,{variant:"body2",color:"text.secondary",children:["Tuetut l\xe4hteet: ",Object(m.jsx)("b",{children:"Coinbase, Coinbase Pro"})]})]})})}),Object(m.jsx)(l.a,{sx:{width:450},onClick:function(){e("/securities")},children:Object(m.jsx)(v.a,{children:Object(m.jsxs)(d.a,{children:[Object(m.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Arvopaperit"}),Object(m.jsx)(b.a,{variant:"body2",color:"text.secondary",children:"Osakkeet ETF:t, rahastot ja muut arvopaperit."}),Object(m.jsxs)(b.a,{variant:"body2",color:"text.secondary",children:["Tuetut l\xe4hteet: ",Object(m.jsx)("b",{children:"Degiro, Nordnet"})]})]})})})]}),Object(m.jsx)(h,{})]})]})},y=a(90),k=a(3),g=a(28),S=a(17),T=a(14),C=a(13),w=a(15),E=a.n(w),F=a(20),I=a.n(F),P=a(260),N=a(264),A=a(132),L=a(128),D=a.n(L),W=function(e){var t=e.zoneHeight,a=e.handleFiles;return Object(m.jsx)(s.a,{sx:{pt:4,pb:3,width:"100%","& .MuiDropzoneArea-textContainer":{color:"black"},"& .MuiDropzoneArea-text":{paddingTop:t>200?8:4,fontSize:20},"& .MuiDropzoneArea-root":{height:t}},children:Object(m.jsx)(A.a,{acceptedFiles:["text/x-csv","text/plain","application/vnd.ms-excel","application/x-csv","application/csv","text/csv","text/comma-separated-values","text/x-comma-separated-values","text/tab-separated-values"],onAdd:a,onDelete:function(e){return console.log("Removed File:",e)},onAlert:function(e,t){console.log("".concat(t,": ").concat(e))},Icon:D.a,dropzoneText:t>200?"Pudota CSV-tiedostoja t\xe4h\xe4n":"Pudota lis\xe4\xe4 CSV-tiedostoja t\xe4h\xe4n",fileObjects:[]})})},Y=a(81),K={"P\xe4iv\xe4ys":"date",Aika:"time",Tuote:"security",ISIN:"ISIN",Reference:"reference",Venue:"venue",Quantity:"quantity",Kurssi:"rate","Kurssi-valuutta":"rateCurrency","Markkina-arvo":"marketValue","Markkina-arvo-valuutta":"marketValueCurrency",Value:"value","Value-valuutta":"valueCurrency",Vaihtokurssi:"exchangeRate","Transaction costs":"transactionCosts","Transaction costs-valuutta":"transactionCostsCurrency",Kokonaissumma:"totalAmount","Kokonaissumma-valuutta":"totalAmountCurrency","Order ID":"orderId"},M=function(e){if(K[e])return K[e]},V=a(38),B=a.n(V),R=(a(167),["portfolio","tradeid","product","side","createdat","size","sizeunit","price","fee","total","pricefeetotalunit"]),U=["Timestamp","TransactionType","Asset","QuantityTransacted","SpotPriceCurrency","SpotPriceatTransaction","Subtotal","Total","Fees","Notes"],z=["date","time","security","ISIN","reference","venue","quantity","rate","rateCurrency","marketValue","marketValueCurrency","value","valueCurrency","exchangeRate","transactionCosts","transactionCostsCurrency","totalAmount","totalAmountCurrency","orderId","datetime"],H=["Id","Kirjauspaiva","Kauppapaiva","Maksupaiva","Salkku","Tapahtumatyyppi","Arvopaperi","Instrumenttityyppi","ISIN","Maara","Kurssi","Korko","Kokonaiskulut","KokonaiskulutValuutta","Summa","Valuutta","Hankintaarvo","Tulos","Kokonaismaara","Saldo","Vaihtokurssi","Tapahtumateksti","Mitatointipaiva","Laskelma","Vahvistusnumero","Valityspalkkio","ValityspalkkioValuutta"],q=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e.charCodeAt(a)|e.charCodeAt(a+1)<<8);return String.fromCharCode.apply(String,t)},G=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r,i,o,c,s,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=0;case 2:if(!(i<a.length)){e.next=19;break}return e.prev=3,o=t[0].data?t[0].data.toString().split(",")[1]:"",c="parseNordNetCSV"===a[i].name?q(atob(o)):(l=o,decodeURIComponent(escape(window.atob(l)))),s=c.toString(),e.next=9,a[i](s);case 9:return u=e.sent,e.abrupt("return",u);case 13:e.prev=13,e.t0=e.catch(3),r.push(e.t0);case 16:i++,e.next=2;break;case 19:return e.abrupt("return",[{Source:"Error",Error:null!==(n=r.find((function(e){return e instanceof TypeError})))&&void 0!==n?n:r[0]}]);case 20:case"end":return e.stop()}var l}),e,null,[[3,13]])})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=6;break;case 3:e.t0=e.sent.parse,e.next=9;break;case 6:return e.next=8,a.e(3).then(a.bind(null,287));case 8:e.t0=e.sent.parse;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r,i,o,c,s,u,l,d,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.next=3,Q();case 3:n=e.sent,r=n(t,{cast:function(e,t){return t.header?""===e?M("".concat(a,"-valuutta")):(a=e,M(e)):String(e)},columns:!0,trim:!0}),i=[],o=!1,c=!1,e.prev=8,u=Object(Y.a)(r);case 10:return e.next=12,u.next();case 12:if(!(o=!(l=e.sent).done)){e.next=18;break}d=l.value,i.push(d);case 15:o=!1,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,!o||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!c){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:if(p=i.map((function(e){return e.datetime=B()("".concat(e.date,"-").concat(e.time),"DD-MM-YYYY-HH-mm").toDate(),e})),!i.every((function(e){return 0!==I.a.difference(I.a.sortBy(z),I.a.sortBy(Object.keys(e))).length}))){e.next=37;break}throw TypeError("All headers not found in the provided Degiro file.");case 37:return e.abrupt("return",p.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{Source:"Degiro"})})));case 38:case"end":return e.stop()}}),e,null,[[8,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r,i,o,c,s,u,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:a=e.sent,n=a(t,{delimiter:["\t"],columns:!0,trim:!0,cast:function(e,t){if(t.header){var a=e;return a.includes("\xe4")&&(a=a.replace(/\xe4/g,"a")),a.includes("\xf6")&&(a=a.replace(/\xf6/g,"o")),a.includes("-")&&(a=a.replace(/-/g,"")),a.replace(/\s/g,"")}var n=t.column;return"Maara"===n||"Kurssi"===n||"Valityspalkkio"===n||"Summa"===n||"Kokonaiskulut"===n||"Kokonaismaara"===n?Number.parseFloat(e.replace(/,/g,".")):"Kirjauspaiva"===n||"Kauppapaiva"===n||"Maksupaiva"===n?B()(e,"YYYY-MM-DD").toDate():String(e)}}),r=[],i=!1,o=!1,e.prev=7,s=Object(Y.a)(n);case 9:return e.next=11,s.next();case 11:if(!(i=!(u=e.sent).done)){e.next=17;break}l=u.value,r.push(l);case 14:i=!1,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),o=!0,c=e.t0;case 23:if(e.prev=23,e.prev=24,!i||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!o){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!r.every((function(e){return 0!==I.a.difference(H,I.a.sortBy(Object.keys(e))).length}))){e.next=35;break}throw TypeError("All headers not found in the provided Nordnet file.");case 35:return e.abrupt("return",r.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{Source:"Nordnet"})})));case 36:case"end":return e.stop()}}),e,null,[[7,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.a.findIndex(null===t||void 0===t?void 0:t.split("\n"),(function(e){return null===e||void 0===e?void 0:e.startsWith("Timestamp,Transaction")})),e.next=3,Q();case 3:if(n=e.sent,!(null!==(r=n(t,{cast:function(e,t){return t.header?e.includes("(")?e.split("(")[0].replace(/\s/g,""):e.replace(/\s/g,""):(B.a.tz,"Timestamp"===t.column?B()(e,"YYYY-MM-DD-HH-mm").tz("Europe/Helsinki").toDate():"TransactionType"===t.column?e.toUpperCase():String(e))},columns:!0,from_line:a>0?a+1:1,trim:!0}))&&void 0!==r?r:[]).every((function(e){return 0!==I.a.difference(U,I.a.sortBy(Object.keys(e))).length}))){e.next=7;break}throw TypeError("All headers not found in the provided Coinbase file.");case 7:return e.abrupt("return",r.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{Source:"Coinbase"})})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r,i,o,c,s,u,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:a=e.sent,n=a(t,{cast:function(e,t){return t.header?e.includes("/")?e.replace(/\//g,"").replace(/\s/g,""):e.replace(/\s/g,""):"createdat"===t.column?new Date(e):String(e)},columns:!0,trim:!0}),r=[],i=!1,o=!1,e.prev=7,s=Object(Y.a)(n);case 9:return e.next=11,s.next();case 11:if(!(i=!(u=e.sent).done)){e.next=17;break}l=u.value,r.push(l);case 14:i=!1,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),o=!0,c=e.t0;case 23:if(e.prev=23,e.prev=24,!i||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!o){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!r.every((function(e){return 0!==I.a.difference(I.a.sortBy(R),I.a.sortBy(Object.keys(e))).length}))){e.next=35;break}throw TypeError("All headers not found in the provided Coinbase Pro file.");case 35:return e.abrupt("return",r.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{Source:"CoinbasePro",product:e.product.split("-")[0],Error:"EUR"!==e.pricefeetotalunit?"Invalid currency detected":void 0})})));case 36:case"end":return e.stop()}}),e,null,[[7,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),$=a(270),ee=a(273),te=a(274),ae=a(275),ne=a(276),re=a(277),ie=a(278),oe=a(258),ce=[{id:"ticker",label:"Tuote",minWidth:120},{id:"buydate",label:"Hankintap\xe4iv\xe4",minWidth:150},{id:"selldate",label:"Luovutusp\xe4iv\xe4",minWidth:150},{id:"amountsold",label:"Myyty kpl",minWidth:100,format:function(e){return e.toFixed(8)}},{id:"transferPrice",label:"Luovutushinta",minWidth:120},{id:"acquisitionPrice",label:"Hankintahinta",minWidth:100,format:function(e){return e.toFixed(2)}},{id:"acquisitionFee",label:"Hankintakulut",minWidth:100},{id:"transferFee",label:"Luovutuskulut",minWidth:80},{id:"profitOrLoss",label:"Voitto/Tappio",minWidth:170,format:function(e){return e.toFixed(3)}}],se=[{id:"paivays",label:"Paivays",minWidth:150},{id:"tuote",label:"Tuote",minWidth:200},{id:"isin",label:"ISIN",minWidth:170},{id:"maara",label:"Maara",minWidth:100,format:function(e){return e.toFixed(2)}},{id:"kurssi",label:"Kurssi",minWidth:120},{id:"arvo",label:"Arvo",minWidth:100},{id:"kulut",label:"Kulut",minWidth:100},{id:"kokonaissumma",label:"Kokonaissumma",minWidth:170}],ue=[{id:"paivays",label:"Paivays",minWidth:150},{id:"operaatio",label:"Operaatio",minWidth:100},{id:"tuote",label:"Tuote",minWidth:100},{id:"arvo",label:"Arvo",minWidth:100},{id:"maara",label:"M\xe4\xe4r\xe4",minWidth:100,format:function(e){return e.toFixed(2)}},{id:"kurssi",label:"Kurssi",minWidth:120},{id:"kulut",label:"Kulut",minWidth:110,format:function(e){return e.toFixed(4)}},{id:"kokonaissumma",label:"Kokonaissumma",minWidth:170}],le=function(e){var t=e.rows,a=e.mode,r=Object(n.useState)(0),i=Object(C.a)(r,2),o=i[0],c=i[1],s=Object(n.useState)(10),u=Object(C.a)(s,2),l=u[0],d=u[1],p=[];"SECURITY"===a?p=se:"CRYPTO"===a?p=ue:"RESULT"===a&&(p=ce);return Object(n.useEffect)((function(){window.scrollTo(0,250)}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)($.a,{sx:{width:"100%",overflow:"hidden"},children:[Object(m.jsx)(ee.a,{sx:{maxHeight:1400},children:Object(m.jsxs)(te.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(m.jsx)(ae.a,{children:Object(m.jsx)(ne.a,{children:p.map((function(e){return Object(m.jsx)(re.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(m.jsx)(ie.a,{children:t.slice(o*l,o*l+l).map((function(e,t){return Object(m.jsx)(ne.a,{hover:!0,role:"checkbox",tabIndex:-1,children:p.map((function(t){var a=e[t.id];return Object(m.jsx)(re.a,{align:t.align,children:t.format&&"number"===typeof a?t.format(a):a},t.id)}))},t)}))})]})}),Object(m.jsx)(oe.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:l,page:o,onPageChange:function(e,t){c(t)},onRowsPerPageChange:function(e){d(+e.target.value),c(0)}})]})})},de=a(279),pe=function(e){var t=e.header,a=e.content,n=e.footer,r=e.footerSecondary,i=(e.contentColor,Object(j.a)({typography:{fontSize:14},palette:{background:{paper:"#fff"},text:{primary:"#173A5E",secondary:"#46505A"},action:{active:"#001E3C"}}}));return Object(m.jsx)(x.a,{theme:i,children:Object(m.jsxs)(de.a,{sx:{bgcolor:"background.paper",boxShadow:1,borderRadius:1,p:2,minWidth:350},children:[Object(m.jsx)(de.a,{sx:{color:"text.secondary"},children:t}),Object(m.jsx)(de.a,{sx:{color:"text.primary",fontSize:30,fontWeight:"medium"},children:a}),Object(m.jsx)(de.a,{sx:{color:Number(a)>0?"success.light":"error.light",display:"inline",fontWeight:"medium",mx:.5},children:n}),Object(m.jsx)(de.a,{sx:{color:"text.secondary",display:"inline",fontSize:12},children:r})]})})},be=a(76),fe=a.n(be),me=a(131),he=a.n(me),je=a(130),xe=a.n(je);var ve=function(e){var t=function(e){var t=e.map((function(e){return Object(S.a)({},e)}));return t.filter((function(e){return"SELL"===e.type})).reduce((function(e,a){return[].concat(Object(T.a)(e),[Oe(t,a)])}),[])}(e).flatMap((function(e){var t,a=I.a.sumBy(e.transactions,(function(e){return e.amountsold})),n=e.transactions.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{transferFee:e.amountsold/a*e.transferFee})})),r=e.transactions[0]?e.transactions[0].transferFee:0,i=I.a.sumBy(n,(function(e){return e.transferFee}));r!==i&&console.error("Amount of fees for do not match for ".concat(null===(t=e.transactions[0])||void 0===t?void 0:t.ticker,": ").concat(r," and ").concat(i));return n}));return t},Oe=function(e,t){var a=0,n=[],r=e.filter((function(e){var a=e.type,n=e.symbol,r=e.date;return"BUY"===a&&n===t.symbol&&r<t.date}));if(I.a.orderBy(r,(function(e){return e.date}),"asc").forEach((function(e){var r=Math.min(t.amount,e.amount);if(0!==r){var i={ticker:t.symbol,buydate:e.date,selldate:t.date,amountsold:r,transferPrice:t.price,profitOrLoss:r*(t.price-e.price),acquisitionPrice:e.price,acquisitionFee:e.transactionFee,transferFee:t.transactionFee};n.push(i),e.amount-=r,t.amount-=r;var o=r*(t.price-e.price);a+=o}})),Math.round(t.amount)>0)throw Error("Amount of sales for ticker ".concat(t.symbol," exceeds the amount of buys by ").concat(t.amount,". In transaction made in ").concat(new Date(t.date).toLocaleString("en-GB",{timeZone:"UTC"})));return{capitalGainPerSellDate:a,transactions:n}},ye=a(129),ke=a.n(ye),ge=[X,_],Se=[Z,J],Te=function(e){var t=e.mode,a=Object(n.useState)(400),r=Object(C.a)(a,2),i=r[0],u=r[1],l=Object(n.useState)([]),d=Object(C.a)(l,2),p=d[0],v=d[1],O=Object(n.useState)(!1),y=Object(C.a)(O,2),w=y[0],F=y[1],A=Object(n.useState)([]),L=Object(C.a)(A,2),D=L[0],Y=L[1],K=Object(n.useState)({}),M=Object(C.a)(K,2),V=M[0],R=M[1],U=Object(n.useState)([]),z=Object(C.a)(U,2),H=z[0],q=z[1],Q=Object(n.useState)(""),Z=Object(C.a)(Q,2),J=Z[0],X=Z[1],_=Object(n.useState)(""),$=Object(C.a)(_,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(C.a)(ae,2),re=ne[0],ie=ne[1],oe=Object(n.useState)({}),ce=Object(C.a)(oe,2),se=ce[0],ue=ce[1],de=Object(j.a)({typography:{fontSize:14}}),be=function(e){var t=[];Object.keys(e).forEach((function(a){if("Coinbase"===a)t.push(e.Coinbase.map((function(e){var t,a="".concat(e.Subtotal?Number(e.Subtotal).toFixed(2):(e.QuantityTransacted*e.SpotPriceatTransaction).toFixed(2)," ").concat(e.SpotPriceCurrency);return{paivays:new Date(e.Timestamp).toLocaleString("en-GB",{timeZone:"UTC"}),tuote:e.Asset,arvo:a,maara:e.QuantityTransacted,kulut:"".concat(Number(null!==(t=e.Fees)&&void 0!==t?t:0).toFixed(2)," ").concat(e.SpotPriceCurrency),kurssi:"".concat(e.SpotPriceatTransaction," ").concat(e.SpotPriceCurrency),kokonaissumma:"".concat(Number(e.Total?e.Total:0).toFixed(2)," ").concat(e.SpotPriceCurrency),operaatio:e.TransactionType}})));else if("CoinbasePro"===a){var n=e.CoinbasePro.find((function(e){return"Invalid currency detected"===(null===e||void 0===e?void 0:e.Error)}));n&&X("".concat(n.Error," In trancactions made in ").concat(n.createdat.toLocaleString("en-GB",{timeZone:"UTC"}),".")),t.push(function(e){return e.map((function(e){var t,a;return{paivays:e.createdat.toLocaleString("en-GB",{timeZone:"UTC"}),tuote:e.product,arvo:"".concat(e.size*e.price," ").concat(e.pricefeetotalunit),maara:e.size,kulut:"".concat(Number(null!==(t=e.fee)&&void 0!==t?t:0).toFixed(2)," ").concat(e.pricefeetotalunit),kurssi:"".concat(e.price," ").concat(e.pricefeetotalunit),kokonaissumma:"".concat(Number(null!==(a=e.total)&&void 0!==a?a:0).toFixed(2)," ").concat(e.pricefeetotalunit),operaatio:e.side}}))}(e.CoinbasePro))}else"Degiro"===a?t.push(function(e){return e.map((function(e){return{paivays:e.datetime.toUTCString(),tuote:e.security,isin:e.ISIN,arvo:"".concat(e.value," ").concat(e.valueCurrency),maara:e.quantity,kulut:e.transactionCosts,kurssi:"".concat(e.rate," ").concat(e.rateCurrency),kokonaissumma:"".concat(e.totalAmount," ").concat(e.totalAmountCurrency)}}))}(e.Degiro)):"Nordnet"===a&&t.push(function(e){return e.map((function(e){return{paivays:e.Kauppapaiva.toUTCString(),tuote:e.Arvopaperi,isin:e.ISIN,arvo:"".concat(e.Summa," ").concat(e.Valuutta),maara:e.Maara,kulut:e.Kokonaiskulut,kurssi:"".concat(e.Kurssi," ").concat(e.Valuutta),kokonaissumma:"".concat(e.Summa-e.Kokonaiskulut," ").concat(e.Valuutta)}}))}(e.Nordnet))})),Y(I.a.flatten(t)),u(200),F(!0)};return Object(n.useEffect)((function(){Object(g.a)(E.a.mark((function e(){var a,n,r,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=8;break}return console.log("files Debug",p),e.next=4,G(p,"CRYPTO"===t?ge:Se);case 4:n=e.sent,"Error"===(r=null===(a=n[0])||void 0===a?void 0:a.Source)?(i=n[0].Error.message,X("malformed URI sequence"===i?"Unable to parse file, is it encoded in a weird format?":n[0].Error.message)):(be(Object(S.a)(Object(S.a)({},V),{},Object(k.a)({},r,n))),R(Object(S.a)(Object(S.a)({},V),{},Object(k.a)({},r,n)))),v([]);case 8:case"end":return e.stop()}}),e)})))()}),[p]),Object(n.useEffect)((function(){}),[V]),Object(n.useEffect)((function(){J.includes("In trancactions made in")&&ie(!0)}),[J]),Object(m.jsxs)(x.a,{theme:de,children:[Object(m.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(m.jsx)(o.a,{}),Object(m.jsxs)(s.a,{component:"main",sx:{pt:8,pb:4},children:[Object(m.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,width:"sm",children:[Object(m.jsx)(b.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"VEROTUNKKI"}),Object(m.jsx)(b.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:0},component:"p",children:"CRYPTO"===t?"Virtuaalivaluutat":"Arvopaperit"}),J&&Object(m.jsx)(P.a,{severity:"error",children:J}),0===H.length&&Object(m.jsx)(W,{zoneHeight:i,handleFiles:function(e){return v([].concat(Object(T.a)(p),Object(T.a)(e)))}}),H.length>0&&Object(m.jsxs)(f.a,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,sx:{pb:4},children:[Object(m.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(pe,{header:"Gross Capital Gain",content:se.capitalGains.toFixed(2),footer:"Gains",footerSecondary:"before losses and fees",contentColor:"success.light"}),Object(m.jsx)(pe,{header:"Gross Capital Loss",content:se.capitalLosses.toFixed(2),footer:"Losses",footerSecondary:"before gains and fees",contentColor:"error.light"})]}),Object(m.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(pe,{header:"Transaction Fees",content:se.transactionTotal.toFixed(2),footer:"Fees",footerSecondary:"acquisition and transfer Fees",contentColor:"error.light"}),Object(m.jsx)(pe,{header:"Net Capital Gain",content:se.netProfit.toFixed(2),footer:"Total",footerSecondary:"Gains with fees and losses",contentColor:se.netProfit>0?"success.light":"error.light"})]})]}),Object(m.jsx)(b.a,{alignSelf:"flex-start",sx:{pl:4},component:"p",children:"CRYPTO"===t?"Tuetut l\xe4hteet: Coinbase, Coinbase Pro":"Tuetut l\xe4hteet: Nordnet, Degiro"}),ee&&Object(m.jsx)(P.a,{severity:"error",children:ee}),re&&Object(m.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(P.a,{severity:"warning",children:"You have made transactions that have not been traded in EUR. Do you want to use an external API to fetch the currency info? EXPERIMENTAL!"}),Object(m.jsx)(N.a,{variant:"contained",onClick:function(){Object(g.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(V.CoinbasePro.map(function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r,i,o,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B()(t.createdat).format("YYYY-MM-DD"),e.next=3,ke.a.get("https://api.coinbase.com/v2/prices/".concat(t.sizeunit,"-EUR/spot?date=").concat(n));case 3:return e.next=5,e.sent.data.data;case 5:if(e.t1=a=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===a;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=a.amount;case 14:return r=e.t2,i=t.fee/t.total,o=r*t.size,c=o*i,e.abrupt("return",Object(S.a)(Object(S.a)({},t),{},{pricefeetotalunit:"EUR",price:r,fee:c,total:o-c,Error:void 0}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,a=Object(S.a)(Object(S.a)({},V),{},{CoinbasePro:t}),R(a),be(a),ie(!1),X("");case 8:case"end":return e.stop()}}),e)})))()},endIcon:Object(m.jsx)(xe.a,{}),children:"Fetch"})]}),w&&!re&&Object(m.jsxs)(f.a,{direction:"row",spacing:2,children:[Object(m.jsx)(N.a,{variant:"outlined",onClick:function(){v([]),Y([]),R({}),F(!1),u(400),q([])},startIcon:Object(m.jsx)(fe.a,{}),children:"Poistha"}),Object(m.jsx)(N.a,{disabled:H.length>0,onClick:function(){var e=[];try{null!==V&&void 0!==V&&V.Coinbase&&e.push.apply(e,Object(T.a)(function(e){var t=[];return e.forEach((function(e){if("CONVERT"===e.TransactionType){var a=e.Notes.split(" "),n=Number(a[4]),r=a[5];t.push(Object(S.a)(Object(S.a)({},e),{},{TransactionType:"SELL",Fees:0,Total:e.Total-e.Fees})),t.push(Object(S.a)(Object(S.a)({},e),{},{TransactionType:"BUY",Asset:r,QuantityTransacted:n,SpotPriceatTransaction:e.Subtotal/n}))}else("COINBASE EARN"===e.TransactionType||"RECEIVE"===e.TransactionType)&&t.push(Object(S.a)(Object(S.a)({},e),{},{TransactionType:"BUY"}))})),e.concat(t).filter((function(e){return"BUY"===e.TransactionType||"SELL"===e.TransactionType})).map((function(e){var t;return{symbol:e.Asset,date:new Date(e.Timestamp),price:Number(e.SpotPriceatTransaction),amount:Number(e.QuantityTransacted),type:e.TransactionType,transactionFee:Number(null!==(t=e.Fees)&&void 0!==t?t:0)}}))}(V.Coinbase))),null!==V&&void 0!==V&&V.CoinbasePro&&e.push.apply(e,Object(T.a)(function(e){return e.filter((function(e){return"BUY"===e.side||"SELL"===e.side})).map((function(e){return{symbol:e.product,date:new Date(e.createdat),price:Number(e.price),amount:Number(e.size),type:e.side,transactionFee:Number(e.fee)}}))}(V.CoinbasePro))),null!==V&&void 0!==V&&V.Degiro&&e.push.apply(e,Object(T.a)(function(e){return e.map((function(e){return{symbol:e.security,date:e.datetime,price:e.rate,amount:e.quantity,type:e.quantity>0?"BUY":"SELL",transactionFee:Math.max(e.transactionCosts)}}))}(V.Degiro))),null!==V&&void 0!==V&&V.Nordnet&&e.push.apply(e,Object(T.a)(function(e){return e.filter((function(e){return"MYYNTI"===e.Tapahtumatyyppi||"OSTO"===e.Tapahtumatyyppi})).map((function(e){return{symbol:e.Arvopaperi,date:e.Kauppapaiva,price:e.Kurssi,amount:e.Maara,type:"OSTO"===e.Tapahtumatyyppi?"BUY":"SELL",transactionFee:e.Kokonaiskulut}}))}(V.Nordnet)));var t=ve(e);q(I.a.sortBy(t,(function(e){return e.selldate})).map((function(e){return Object(S.a)(Object(S.a)({},e),{},{buydate:new Date(e.buydate).toISOString().substring(0,16),selldate:new Date(e.selldate).toISOString().substring(0,16),transferFee:"".concat(Number(e.transferFee).toFixed(4)," EUR"),profitOrLoss:"".concat(e.profitOrLoss.toFixed(3)," EUR")})}))),ue({capitalGains:I.a.sumBy(t,(function(e){return e.profitOrLoss>0?e.profitOrLoss:0})),capitalLosses:I.a.sumBy(t,(function(e){return e.profitOrLoss<0?e.profitOrLoss:0})),transactionTotal:I.a.sumBy(t,(function(e){return Math.abs(e.transferFee)+Math.abs(e.acquisitionFee)})),netProfit:I.a.sumBy(t,(function(e){return e.profitOrLoss-(Math.abs(e.transferFee)+Math.abs(e.acquisitionFee))}))})}catch(a){te(a.message)}},variant:"contained",endIcon:Object(m.jsx)(he.a,{}),children:"Laske"})]}),w&&0===H.length&&Object(m.jsx)(le,{mode:t,rows:D}),H.length>0&&Object(m.jsx)(le,{mode:"RESULT",rows:H})]}),Object(m.jsx)(h,{})]})]})};i.a.render(Object(m.jsx)(y.a,{basename:"",children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{path:"/",element:Object(m.jsx)(O,{})}),Object(m.jsx)(u.a,{path:"securities",element:Object(m.jsx)(Te,{mode:"SECURITY"})}),Object(m.jsx)(u.a,{path:"crypto",element:Object(m.jsx)(Te,{mode:"CRYPTO"})})]})}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.ee933700.chunk.js.map