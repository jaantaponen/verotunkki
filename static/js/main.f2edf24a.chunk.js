(this.webpackJsonpverohommeli=this.webpackJsonpverohommeli||[]).push([[0],{248:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(58),i=a.n(r),o=a(324),c=a(251),s=a(335),u=a(20),l=a(336),d=a(337),p=a(338),f=a(334),b=a(321),m=a(2),h=function(){return Object(m.jsxs)(b.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,width:"sm",sx:{pt:1},children:[Object(m.jsx)(f.a,{variant:"body2",sx:{pt:4},color:"text.secondary",align:"center",children:"Tarkista tiedot aina itse virheiden varalta."}),Object(m.jsx)(f.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:"Olet itse vastuussa omista veroistasi."}),Object(m.jsx)(f.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:"Sivustolle l\xe4hett\xe4mi\xe4si tiedostoja k\xe4sitell\xe4\xe4n vain paikallisesti selaimessasi."}),Object(m.jsxs)(f.a,{variant:"body2",sx:{pt:4},color:"text.secondary",align:"center",children:["Huomasitko virheen tai sivusti ei toimi mielest\xe4si oikein? Ilmoita ongelmastasi\xa0",Object(m.jsx)(p.a,{href:"https://github.com/jaantaponen/verotunkki/issues/new",children:"t\xe4\xe4ll\xe4"})]}),Object(m.jsxs)(f.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(p.a,{color:"inherit",href:"https://verotunkki.fi/",children:"Verotunkki"})," ",(new Date).getFullYear(),"."]})]})},j=a(177),v=a(342),x=a(339),y=function(){var t=Object(u.f)(),e=Object(j.a)({typography:{fontSize:14}});return Object(m.jsxs)(v.a,{theme:e,children:[Object(m.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(m.jsx)(o.a,{}),Object(m.jsx)(s.a,{component:"main",maxWidth:"sm",sx:{height:"100vh",pt:8,pb:4},children:Object(m.jsxs)(b.a,{direction:"column",justifyContent:"space-between",alignItems:"space-between",sx:{height:"100%",pt:0,pb:2},children:[Object(m.jsxs)(b.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:6,width:"sm",children:[Object(m.jsx)(f.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"VEROTUNKKI"}),Object(m.jsx)(f.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:3},component:"p",children:"Verotunkki laskee puolestasi luovutusvoitot ja -tappiot, ja ulostaa verottajayhteensopivan reportin."}),Object(m.jsx)(f.a,{alignSelf:"center",variant:"h6",component:"p",sx:{pt:2},children:"Valitse verotettavan tulon tyyppi:"}),Object(m.jsx)(l.a,{sx:{width:450},onClick:function(){t("/crypto")},children:Object(m.jsx)(x.a,{children:Object(m.jsxs)(d.a,{children:[Object(m.jsx)(f.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Virtuaalivaluutat"}),Object(m.jsx)(f.a,{variant:"body2",color:"text.secondary",children:"Perus hyv\xe4 Ethereum."}),Object(m.jsxs)(f.a,{variant:"body2",color:"text.secondary",children:["Tuetut l\xe4hteet: ",Object(m.jsx)("b",{children:"Coinbase, Coinbase Pro"})]})]})})}),Object(m.jsx)(l.a,{sx:{width:450},onClick:function(){t("/securities")},children:Object(m.jsx)(x.a,{children:Object(m.jsxs)(d.a,{children:[Object(m.jsx)(f.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Arvopaperit"}),Object(m.jsx)(f.a,{variant:"body2",color:"text.secondary",children:"Osakkeet ETF:t, rahastot ja muut arvopaperit."}),Object(m.jsxs)(f.a,{variant:"body2",color:"text.secondary",children:["Tuetut l\xe4hteet: ",Object(m.jsx)("b",{children:"Degiro, Nordnet"})]})]})})})]}),Object(m.jsx)(h,{})]})})]})},O=a(130),k=a(3),g=a(27),w=a(18),S=a(15),C=a(9),T=a(14),E=a.n(T),N=a(26),I=a.n(N),P=a(330),A=a(71),F=a(176),L=a(171),R=a.n(L),D=function(t){var e=t.zoneHeight,a=t.handleFiles;return Object(m.jsx)(s.a,{sx:{pt:4,pb:3,width:"100%","& .MuiDropzoneArea-textContainer":{color:"black"},"& .MuiDropzoneArea-text":{paddingTop:e>200?8:4,fontSize:20},"& .MuiDropzoneArea-root":{height:e}},children:Object(m.jsx)(F.a,{acceptedFiles:["text/x-csv","text/plain","application/vnd.ms-excel","application/x-csv","application/csv","text/csv","text/comma-separated-values","text/x-comma-separated-values","text/tab-separated-values"],onAdd:a,onDelete:function(t){return console.log("Removed File:",t)},onAlert:function(t,e){console.log("".concat(e,": ").concat(t))},Icon:R.a,dropzoneText:e>200?"Pudota CSV-tiedostoja t\xe4h\xe4n":"Pudota lis\xe4\xe4 CSV-tiedostoja t\xe4h\xe4n",fileObjects:[]})})},V=a(109),M={"P\xe4iv\xe4ys":"date",Aika:"time",Tuote:"security",ISIN:"ISIN",Reference:"reference",Venue:"venue",Quantity:"quantity",Kurssi:"rate","Kurssi-valuutta":"rateCurrency","Markkina-arvo":"marketValue","Markkina-arvo-valuutta":"marketValueCurrency",Value:"value","Value-valuutta":"valueCurrency",Vaihtokurssi:"exchangeRate","Transaction costs":"transactionCosts","Transaction costs-valuutta":"transactionCostsCurrency",Kokonaissumma:"totalAmount","Kokonaissumma-valuutta":"totalAmountCurrency","Order ID":"orderId"},Y=function(t){if(M[t])return M[t]},W=a(51),U=a.n(W),B=(a(226),["portfolio","tradeid","product","side","createdat","size","sizeunit","price","fee","total","pricefeetotalunit"]),K=["Timestamp","TransactionType","Asset","QuantityTransacted","SpotPriceCurrency","SpotPriceatTransaction","Subtotal","Total","Fees","Notes"],z=["date","time","security","ISIN","reference","venue","quantity","rate","rateCurrency","marketValue","marketValueCurrency","value","valueCurrency","exchangeRate","transactionCosts","transactionCostsCurrency","totalAmount","totalAmountCurrency","orderId","datetime"],H=["Id","Kirjauspaiva","Kauppapaiva","Maksupaiva","Salkku","Tapahtumatyyppi","Arvopaperi","Instrumenttityyppi","ISIN","Maara","Kurssi","Korko","Kokonaiskulut","KokonaiskulutValuutta","Summa","Valuutta","Hankintaarvo","Tulos","Kokonaismaara","Saldo","Vaihtokurssi","Tapahtumateksti","Mitatointipaiva","Laskelma","Vahvistusnumero","Valityspalkkio","ValityspalkkioValuutta"],q=a(94),G=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(t.charCodeAt(a)|t.charCodeAt(a+1)<<8);return String.fromCharCode.apply(String,e)},Q=function(){var t=Object(g.a)(E.a.mark((function t(e,a){var n,r,i,o,c,s,u;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=0;case 2:if(!(i<a.length)){t.next=19;break}return t.prev=3,o=e[0].data?e[0].data.toString().split(",")[1]:"",c="getDataNordnet"===a[i].name?G(atob(o)):(l=o,decodeURIComponent(escape(window.atob(l)))),s=c.toString(),t.next=9,a[i](s);case 9:return u=t.sent,t.abrupt("return",u);case 13:t.prev=13,t.t0=t.catch(3),r.push(t.t0);case 16:i++,t.next=2;break;case 19:return t.abrupt("return",[{Source:"Error",Error:null!==(n=r.find((function(t){return t instanceof TypeError})))&&void 0!==n?n:r[0]}]);case 20:case"end":return t.stop()}var l}),t,null,[[3,13]])})));return function(e,a){return t.apply(this,arguments)}}(),J=function(){var t=Object(g.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=6;break;case 3:t.t0=t.sent.parse,t.next=9;break;case 6:return t.next=8,a.e(3).then(a.bind(null,345));case 8:t.t0=t.sent.parse;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(e);case 2:return a=t.sent,n=et(a),t.abrupt("return",{orig:{Degiro:a},rows:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at(e);case 2:return a=t.sent,n=nt(a),t.abrupt("return",{orig:{Nordnet:a},rows:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(e);case 2:return a=t.sent,n=it(a),t.abrupt("return",{orig:{Coinbase:a},rows:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(e);case 2:return a=t.sent,n=ct(a),t.abrupt("return",{orig:{CoinbasePro:a},rows:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n,r,i,o,c,s,u,l,d,p;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="",t.next=3,J();case 3:n=t.sent,r=n(e,{cast:function(t,e){return e.header?""===t?Y("".concat(a,"-valuutta")):(a=t,Y(t)):String(t)},columns:!0,trim:!0}),i=[],o=!1,c=!1,t.prev=8,u=Object(V.a)(r);case 10:return t.next=12,u.next();case 12:if(!(o=!(l=t.sent).done)){t.next=18;break}d=l.value,i.push(d);case 15:o=!1,t.next=10;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(8),c=!0,s=t.t0;case 24:if(t.prev=24,t.prev=25,!o||null==u.return){t.next=29;break}return t.next=29,u.return();case 29:if(t.prev=29,!c){t.next=32;break}throw s;case 32:return t.finish(29);case 33:return t.finish(24);case 34:if(p=i.map((function(t){return t.datetime=U()("".concat(t.date,"-").concat(t.time),"DD-MM-YYYY-HH-mm").toISOString(),t})),!i.every((function(t){return 0!==I.a.difference(I.a.sortBy(z),I.a.sortBy(Object.keys(t))).length}))){t.next=37;break}throw TypeError("All headers not found in the provided Degiro file.");case 37:return t.next=39,Promise.all(p.map(function(){var t=Object(g.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.a,t.t1=Object(w.a)({},e),t.t2={},t.next=5,Object(q.a)(10);case 5:return t.t3=t.sent,t.t4={Source:"Degiro",id:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 39:return t.abrupt("return",t.sent);case 40:case"end":return t.stop()}}),t,null,[[8,20,24,34],[25,,29,33]])})));return function(e){return t.apply(this,arguments)}}(),et=function(t){return t.map((function(t){return{id:t.id,paivays:new Date(t.datetime),tuote:t.security,isin:t.ISIN,arvo:"".concat(t.value," ").concat(t.valueCurrency),maara:t.quantity,kulut:t.transactionCosts.toString(),kurssi:"".concat(t.rate," ").concat(t.rateCurrency),kokonaissumma:"".concat(t.totalAmount," ").concat(t.totalAmountCurrency),operation:t.quantity>0?"BUY":"SELL"}}))},at=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n,r,i,o,c,s,u,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:a=t.sent,n=a(e,{delimiter:["\t"],columns:!0,trim:!0,cast:function(t,e){if(e.header){var a=t;return a.includes("\xe4")&&(a=a.replace(/\xe4/g,"a")),a.includes("\xf6")&&(a=a.replace(/\xf6/g,"o")),a.includes("-")&&(a=a.replace(/-/g,"")),a.replace(/\s/g,"")}var n=e.column;return"Maara"===n||"Kurssi"===n||"Valityspalkkio"===n||"Summa"===n||"Kokonaiskulut"===n||"Kokonaismaara"===n?Number.parseFloat(t.replace(/,/g,".")):"Kirjauspaiva"===n||"Kauppapaiva"===n||"Maksupaiva"===n?U()(t,"YYYY-MM-DD").toDate():String(t)}}),r=[],i=!1,o=!1,t.prev=7,s=Object(V.a)(n);case 9:return t.next=11,s.next();case 11:if(!(i=!(u=t.sent).done)){t.next=17;break}l=u.value,r.push(l);case 14:i=!1,t.next=9;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),o=!0,c=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==s.return){t.next=28;break}return t.next=28,s.return();case 28:if(t.prev=28,!o){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(23);case 33:if(!r.every((function(t){return 0!==I.a.difference(H,I.a.sortBy(Object.keys(t))).length}))){t.next=35;break}throw TypeError("All headers not found in the provided Nordnet file.");case 35:return t.next=37,Promise.all(r.map(function(){var t=Object(g.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.a,t.t1=Object(w.a)({},e),t.t2={},t.next=5,Object(q.a)(10);case 5:return t.t3=t.sent,t.t4={Source:"Nordnet",id:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 37:return t.abrupt("return",t.sent);case 38:case"end":return t.stop()}}),t,null,[[7,19,23,33],[24,,28,32]])})));return function(e){return t.apply(this,arguments)}}(),nt=function(t){return t.map((function(t){return{id:t.id,paivays:new Date(t.Kauppapaiva),tuote:t.Arvopaperi,isin:t.ISIN,arvo:"".concat(t.Summa," ").concat(t.Valuutta),maara:t.Maara,kulut:t.Kokonaiskulut.toString(),kurssi:"".concat(t.Kurssi," ").concat(t.Valuutta),kokonaissumma:"".concat(t.Summa-t.Kokonaiskulut," ").concat(t.Valuutta),operation:t.Tapahtumatyyppi}}))},rt=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=I.a.findIndex(null===e||void 0===e?void 0:e.split("\n"),(function(t){return null===t||void 0===t?void 0:t.startsWith("Timestamp,Transaction")})),t.next=3,J();case 3:if(n=t.sent,!(r=n(e,{cast:function(t,e){return e.header?t.includes("(")?t.split("(")[0].replace(/\s/g,""):t.replace(/\s/g,""):(U.a.tz,"Timestamp"===e.column?U()(t,"YYYY-MM-DD-HH-mm-ss").toISOString():"TransactionType"===e.column?t.toUpperCase():String(t))},columns:!0,from_line:a>0?a+1:1,trim:!0})).every((function(t){return 0!==I.a.difference(K,I.a.sortBy(Object.keys(t))).length}))){t.next=7;break}throw TypeError("All headers not found in the provided Coinbase file.");case 7:return t.next=9,Promise.all(r.map(function(){var t=Object(g.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.a,t.t1=Object(w.a)({},e),t.t2={},t.next=5,Object(q.a)(10);case 5:return t.t3=t.sent,t.t4={Source:"Coinbase",id:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),it=function(t){return t.map((function(t){var e="".concat(t.Subtotal?Number(t.Subtotal):t.QuantityTransacted*t.SpotPriceatTransaction," ").concat(t.SpotPriceCurrency);return{id:t.id,paivays:new Date(t.Timestamp),tuote:t.Asset,arvo:e,maara:t.QuantityTransacted,kulut:"".concat(Number(t.Fees)?Number(t.Fees):0," ").concat(t.SpotPriceCurrency),kurssi:"".concat(t.SpotPriceatTransaction," ").concat(t.SpotPriceCurrency),kokonaissumma:"".concat(Number(t.Total?t.Total:0)," ").concat(t.SpotPriceCurrency),operation:t.TransactionType}}))},ot=function(){var t=Object(g.a)(E.a.mark((function t(e){var a,n,r,i,o,c,s,u,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:a=t.sent,n=a(e,{cast:function(t,e){return e.header?t.includes("/")?t.replace(/\//g,"").replace(/\s/g,""):t.replace(/\s/g,""):"createdat"===e.column?new Date(t).toISOString():String(t)},columns:!0,trim:!0}),r=[],i=!1,o=!1,t.prev=7,s=Object(V.a)(n);case 9:return t.next=11,s.next();case 11:if(!(i=!(u=t.sent).done)){t.next=17;break}l=u.value,r.push(l);case 14:i=!1,t.next=9;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),o=!0,c=t.t0;case 23:if(t.prev=23,t.prev=24,!i||null==s.return){t.next=28;break}return t.next=28,s.return();case 28:if(t.prev=28,!o){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(23);case 33:if(!r.every((function(t){return 0!==I.a.difference(I.a.sortBy(B),I.a.sortBy(Object.keys(t))).length}))){t.next=35;break}throw TypeError("All headers not found in the provided Coinbase Pro file.");case 35:return t.next=37,Promise.all(r.map(function(){var t=Object(g.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.a,t.t1=Object(w.a)({},e),t.t2={},t.t3=e.product.split("-")[0],t.t4="EUR"!==e.pricefeetotalunit?"Invalid currency detected":void 0,t.next=7,Object(q.a)(10);case 7:return t.t5=t.sent,t.t6={Source:"CoinbasePro",product:t.t3,Error:t.t4,id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t6));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 37:return t.abrupt("return",t.sent);case 38:case"end":return t.stop()}}),t,null,[[7,19,23,33],[24,,28,32]])})));return function(e){return t.apply(this,arguments)}}(),ct=function(t){return t.map((function(t){var e;return{id:t.id,paivays:t.createdat,tuote:t.product,arvo:"".concat(t.size*t.price," ").concat(t.pricefeetotalunit),maara:t.size,kulut:"".concat(null!==(e=t.fee)&&void 0!==e?e:t.fee," ").concat(t.pricefeetotalunit),kurssi:"".concat(t.price," ").concat(t.pricefeetotalunit),kokonaissumma:"".concat(t.total," ").concat(t.pricefeetotalunit),operation:t.side}}))},st=[{field:"paivays",headerName:"Paivays",type:"date",editable:!0,minWidth:180},{field:"operation",headerName:"Operaatio",type:"string",editable:!0,minWidth:120},{field:"isin",headerName:"ISIN",type:"string",editable:!0,minWidth:120},{field:"arvo",headerName:"Arvo",type:"string",editable:!0,minWidth:120},{field:"maara",headerName:"M\xe4\xe4r\xe4",type:"number",editable:!0,minWidth:120},{field:"kurssi",headerName:"Kurssi",type:"string",editable:!0,minWidth:120},{field:"kulut",headerName:"Kulut",type:"number",editable:!0,minWidth:110},{field:"kokonaissumma",headerName:"Kokonaissumma",type:"string",editable:!0,minWidth:170}],ut=[{field:"paivays",headerName:"Paivays",type:"date",editable:!0,minWidth:180},{field:"operation",headerName:"Operaatio",type:"string",editable:!0,minWidth:120},{field:"tuote",headerName:"Tuote",type:"string",editable:!0,minWidth:120},{field:"arvo",headerName:"Arvo",type:"string",editable:!0,minWidth:120},{field:"maara",headerName:"M\xe4\xe4r\xe4",type:"string",editable:!0,minWidth:120},{field:"kurssi",headerName:"Kurssi",type:"string",editable:!0,minWidth:120},{field:"kulut",headerName:"Kulut",type:"number",editable:!0,minWidth:110},{field:"kokonaissumma",headerName:"Kokonaissumma",type:"string",editable:!0,minWidth:170}],lt=[{field:"ticker",headerName:"Tuote",type:"string",editable:!1,minWidth:50},{field:"buydate",headerName:"Hankintap\xe4iv\xe4",type:"date",editable:!1,minWidth:160},{field:"selldate",headerName:"Luovutusp\xe4iv\xe4",type:"date",editable:!1,minWidth:160},{field:"amountsold",headerName:"Myyty kpl",type:"number",editable:!1,minWidth:50},{field:"transferPrice",headerName:"Luovutushinta",type:"string",editable:!1,minWidth:120},{field:"acquisitionPrice",headerName:"Hankintahinta",type:"string",editable:!1,minWidth:120},{field:"acquisitionFee",headerName:"Hankintakulut",type:"string",editable:!1,minWidth:120},{field:"transferFee",headerName:"Luovutuskulut",type:"string",editable:!1,minWidth:120},{field:"profitOrLoss",headerName:"Voitto/Tappio",type:"string",editable:!1,minWidth:170}],dt=a(70),pt=function(){return Object(m.jsx)(dt.b,{className:dt.d.toolbarContainer,children:Object(m.jsx)(dt.c,{})})},ft=function(t){var e=t.rows;return Object(m.jsx)("div",{style:{width:"100%"},children:Object(m.jsx)(dt.a,{sx:{minHeight:700},rows:e,columns:lt,components:{Toolbar:pt}})})},bt=a(262),mt=function(t){var e=t.header,a=t.content,n=t.footer,r=t.footerSecondary,i=t.contentColor,o=Object(j.a)({typography:{fontSize:14},palette:{background:{paper:"#fff"},text:{primary:"#173A5E",secondary:"#46505A"},action:{active:"#001E3C"}}});return Object(m.jsx)(v.a,{theme:o,children:Object(m.jsxs)(bt.a,{sx:{bgcolor:"background.paper",boxShadow:1,borderRadius:1,p:2,minWidth:350},children:[Object(m.jsx)(bt.a,{sx:{color:"text.secondary"},children:e}),Object(m.jsx)(bt.a,{sx:{color:"text.primary",fontSize:30,fontWeight:"medium"},children:a}),Object(m.jsx)(bt.a,{sx:{color:i,display:"inline",fontWeight:"medium",mx:.5},children:n}),Object(m.jsx)(bt.a,{sx:{color:"text.secondary",display:"inline",fontSize:12},children:r})]})})},ht=a(105),jt=a.n(ht),vt=a(175),xt=a.n(vt),yt=a(174),Ot=a.n(yt);var kt=function(t){var e=function(t){var e=t.map((function(t){return Object(w.a)({},t)}));return e.filter((function(t){return"SELL"===t.type})).reduce((function(t,a){return[].concat(Object(S.a)(t),[gt(e,a)])}),[])}(t).flatMap((function(t){var e,a=I.a.sumBy(t.transactions,(function(t){return t.amountsold})),n=t.transactions.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{transferFee:t.amountsold/a*t.transferFee})})),r=t.transactions[0]?t.transactions[0].transferFee:0,i=I.a.sumBy(n,(function(t){return t.transferFee}));r!==i&&console.error("Amount of fees for do not match for ".concat(null===(e=t.transactions[0])||void 0===e?void 0:e.ticker,": ").concat(r," and ").concat(i));return n}));if(0===e.length)throw new Error("No SELL transactions found. Have you sold any asset?");return e},gt=function(t,e){var a=0,n=[];if(I.a.orderBy(t,(function(t){return[t.date,t.type]}),["asc","desc"]).filter((function(t){var a=t.type,n=t.symbol,r=t.date;return"BUY"===a&&n===e.symbol&&r<=e.date})).forEach((function(t){var r=Math.min(e.amount,t.amount);if(0!==r){var i={ticker:e.symbol,buydate:t.date,selldate:e.date,amountsold:r,transferPrice:e.price,profitOrLoss:r*(e.price-t.price),acquisitionPrice:t.price,acquisitionFee:t.transactionFee,transferFee:e.transactionFee};n.push(i),t.amount-=r,e.amount-=r;var o=r*(e.price-t.price);a+=o}})),Math.round(e.amount)>0)throw Error("Amount of sales for ticker ".concat(e.symbol," exceeds the amount of buys by ").concat(e.amount,". In transaction made in ").concat(new Date(e.date).toLocaleString("en-GB",{timeZone:"UTC"})));return{capitalGainPerSellDate:a,transactions:n}},wt=a(173),St=a.n(wt),Ct=function(t){var e=t.rows,a=t.mode,r=t.rawDataAsColumns,i=t.rawDatatSetCallback,o=Object(n.useState)({}),c=Object(C.a)(o,2),s=c[0],u=c[1];return Object(n.useEffect)((function(){var t;if(null!==s&&void 0!==s&&null!==(t=s.row)&&void 0!==t&&t.id){var e=r.find((function(t){return t.id===s.row.id})),a=Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},s.field,s.value)),n=r.map((function(t){return t.id===a.id?a:t}));i(n)}}),[s]),Object(m.jsx)(dt.a,{sx:{height:700,"& .font-tabular-nums":{fontVariantNumeric:"tabular-nums"}},rows:e,columns:"CRYPTO"===a?ut:st,onCellEditCommit:function(t){u(t)}})},Tt=a(82),Et=[_,$],Nt=[X,Z],It=function(t){var e=t.mode,a=Object(n.useState)(400),r=Object(C.a)(a,2),i=r[0],u=r[1],l=Object(n.useState)([]),d=Object(C.a)(l,2),p=d[0],x=d[1],y=Object(n.useState)(!1),O=Object(C.a)(y,2),T=O[0],N=O[1],F=Object(n.useState)([]),L=Object(C.a)(F,2),R=L[0],V=L[1],M=Object(n.useState)([]),Y=Object(C.a)(M,2),W=Y[0],B=Y[1],K=Object(n.useState)({}),z=Object(C.a)(K,2),H=z[0],q=z[1],G=Object(n.useState)([]),J=Object(C.a)(G,2),X=J[0],Z=J[1],_=Object(n.useState)(""),$=Object(C.a)(_,2),tt=$[0],et=$[1],at=Object(n.useState)(""),nt=Object(C.a)(at,2),rt=nt[0],ot=nt[1],ct=Object(n.useState)(!1),st=Object(C.a)(ct,2),ut=st[0],lt=st[1],dt=Object(n.useState)({}),pt=Object(C.a)(dt,2),bt=pt[0],ht=pt[1];Object(n.useEffect)((function(){Object(g.a)(E.a.mark((function t(){var a,n,r,i,o,c,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p.length>0)){t.next=6;break}return t.next=3,Q(p,"CRYPTO"===e?Et:Nt);case 3:n=t.sent,null!==(a=n[0])&&void 0!==a&&a.Error?(r=n[0].Error.message).toString().includes("All headers not found")?et("".concat(r," Are you tryin to parse in the wrong site?")):et("malformed URI sequence"===r?"Unable to parse file, is it encoded in a weird format?":r):(i=n.orig,o=Object.keys(i),c=o[0],s=i[c],V(Object(S.a)(R.concat(n.rows))),B(Object(S.a)(R.concat(n.rows))),q(Object(w.a)(Object(w.a)({},H),{},Object(k.a)({},c,s))),N(!0)),x([]);case 6:case"end":return t.stop()}}),t)})))()}),[p]),Object(n.useEffect)((function(){console.log("rowdataa",R);var t=R.filter((function(t){var e;return"EUR"!==(null===t||void 0===t||null===(e=t.kokonaissumma)||void 0===e?void 0:e.split(" ")[1])&&("BUY"===t.operation||"SELL"===t.operation)}));lt(t.length>0&&R.length>0)}),[R]),Object(n.useEffect)((function(){console.log("rowdataa",R);var t=R.filter((function(t){var e;return"EUR"!==(null===t||void 0===t||null===(e=t.kokonaissumma)||void 0===e?void 0:e.split(" ")[1])&&("BUY"===t.operation||"SELL"===t.operation)}));lt(t.length>0&&R.length>0)}),[R]),Object(n.useEffect)((function(){}),[H]),Object(n.useEffect)((function(){tt.includes("In trancactions made in")&&lt(!0)}),[tt]);var vt=Object(j.a)({typography:{fontSize:14}});return Object(m.jsxs)(v.a,{theme:vt,children:[Object(m.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(m.jsx)(o.a,{}),Object(m.jsxs)(s.a,{component:"main",sx:{pt:8,pb:4},children:[Object(m.jsxs)(b.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,width:"sm",children:[Object(m.jsx)(f.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"VEROTUNKKI"}),Object(m.jsx)(f.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:0},component:"p",children:"CRYPTO"===e?"Virtuaalivaluutat":"Arvopaperit"}),tt&&Object(m.jsx)(P.a,{severity:"error",children:tt}),0===X.length&&Object(m.jsx)(D,{zoneHeight:i,handleFiles:function(t){return x([].concat(Object(S.a)(p),Object(S.a)(t)))}}),X.length>0&&Object(m.jsxs)(b.a,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,sx:{pb:4},children:[Object(m.jsxs)(b.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(mt,{header:"Gross Capital Gain",content:bt.capitalGains.toFixed(2),footer:"Gains",footerSecondary:"before losses and fees",contentColor:"success.light"}),Object(m.jsx)(mt,{header:"Gross Capital Loss",content:bt.capitalLosses.toFixed(2),footer:"Losses",footerSecondary:"before gains and fees",contentColor:"error.light"})]}),Object(m.jsxs)(b.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(mt,{header:"Transaction Fees",content:bt.transactionTotal.toFixed(2),footer:"Fees",footerSecondary:"acquisition and transfer Fees",contentColor:"error.light"}),Object(m.jsx)(mt,{header:"Net Capital Gain",content:bt.netProfit.toFixed(2),footer:"Total",footerSecondary:"Gains with fees and losses",contentColor:bt.netProfit>0?"success.light":"error.light"})]})]}),Object(m.jsx)(f.a,{alignSelf:"flex-start",sx:{pl:4},component:"p",children:"CRYPTO"===e?"Tuetut l\xe4hteet: Coinbase, Coinbase Pro":"Tuetut l\xe4hteet: Nordnet, Degiro"}),rt&&Object(m.jsx)(P.a,{severity:"error",children:rt}),ut&&Object(m.jsxs)(b.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(m.jsx)(P.a,{severity:"warning",children:"You have made transactions that have not been traded in EUR. Do you want to use an external API to fetch the currency info? EXPERIMENTAL!"}),Object(m.jsx)(A.a,{variant:"contained",onClick:function(){Object(g.a)(E.a.mark((function t(){var e,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,Promise.all(W.map(function(){var t=Object(g.a)(E.a.mark((function t(a){var n,r,i,o,c,s,u,l,d;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],"BUY"!==a.operation&&"SELL"!==a.operation||"EUR"===a.kokonaissumma.split(" ")[1]){t.next=22;break}return o=U()(a.paivays).format("YYYY-MM-DD"),t.next=5,St.a.get("https://api.coinbase.com/v2/prices/".concat(a.tuote,"-EUR/spot?date=").concat(o));case 5:return t.next=7,t.sent.data.data;case 7:if(t.t1=r=t.sent,t.t0=null===t.t1,t.t0){t.next=11;break}t.t0=void 0===r;case 11:if(!t.t0){t.next=15;break}t.t2=void 0,t.next=16;break;case 15:t.t2=r.amount;case 16:c=t.t2,s=Number(a.kulut.split(" ")[0])/Number(a.kokonaissumma.split(" ")[0]),u=c*a.maara,l=u*s,n.push(Object(w.a)(Object(w.a)({},a),{},{kurssi:"".concat(c," EUR"),kulut:"".concat(l," EUR"),kokonaissumma:"".concat(u-l," EUR")})),null!==(i=H.CoinbasePro)&&void 0!==i&&i.find((function(t){return t.id===a.id}))&&e.push(Object(w.a)(Object(w.a)({},a),{},{operation:"BUY",id:Object(Tt.a)(10),tuote:"".concat(a.arvo.split(" ")[1]),kurssi:"".concat(c," EUR"),kulut:"".concat(l," EUR"),kokonaissumma:"".concat(u-l," EUR")}));case 22:return d=n.find((function(t){return t.id===a.id})),t.abrupt("return",d||a);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:a=t.sent,B(Object(S.a)(a.concat(e))),V(Object(S.a)(a.concat(e))),lt(!1),et("");case 8:case"end":return t.stop()}}),t)})))()},endIcon:Object(m.jsx)(Ot.a,{}),children:"Fetch"})]}),T&&!ut&&Object(m.jsxs)(b.a,{direction:"row",spacing:2,children:[Object(m.jsx)(A.a,{variant:"outlined",onClick:function(){x([]),V([]),B([]),q({}),N(!1),u(400),Z([])},startIcon:Object(m.jsx)(jt.a,{}),children:"Poistha"}),Object(m.jsx)(A.a,{disabled:X.length>0,onClick:function(){try{var t=W.filter((function(t){return("CONVERT"===t.operation||"COINBASE EARN"===t.operation||"RECEIVE"===t.operation)&&H.Coinbase.map((function(t){return t.id})).includes(t.id)})),e=[];t.forEach((function(t){var a,n=null===(a=H.Coinbase)||void 0===a?void 0:a.find((function(e){return e.id===t.id}));if("CONVERT"===(null===n||void 0===n?void 0:n.TransactionType)){var r=n.Notes.split(" "),i=Number(r[4]),o=r[5];e.push(Object(w.a)(Object(w.a)({},n),{},{TransactionType:"SELL",id:Object(Tt.a)(10),Fees:0,Total:n.Total-n.Fees})),e.push(Object(w.a)(Object(w.a)({},n),{},{TransactionType:"BUY",id:Object(Tt.a)(10),Asset:o,QuantityTransacted:i,SpotPriceatTransaction:n.Subtotal/i}))}else("COINBASE EARN"===(null===n||void 0===n?void 0:n.TransactionType)||"RECEIVE"===(null===n||void 0===n?void 0:n.TransactionType))&&e.push(Object(w.a)(Object(w.a)({},n),{},{id:Object(Tt.a)(10),TransactionType:"BUY"}))}));var a=it(e),n=W.concat(a||[]).map((function(t){var e=a.find((function(e){return e.id===t.id}));return e||t})).filter((function(t){return"BUY"===t.operation||"SELL"===t.operation})).map((function(t){return{symbol:t.tuote,date:new Date(t.paivays),price:Math.abs(Number(t.kurssi.split(" ")[0])),amount:Math.abs(t.maara),type:t.operation,transactionFee:Math.abs(Number(t.kulut.split(" ")[0]))}}));console.log(n);var r=kt(n);Z(r.map((function(t,e){return Object(w.a)(Object(w.a)({},t),{},{buydate:new Date(t.buydate),selldate:new Date(t.selldate),transferFee:"".concat(Number(t.transferFee)," EUR"),profitOrLoss:"".concat(Number(t.profitOrLoss)," EUR"),id:e})}))),ht({capitalGains:I.a.sumBy(r,(function(t){return t.profitOrLoss>0?t.profitOrLoss:0})),capitalLosses:I.a.sumBy(r,(function(t){return t.profitOrLoss<0?t.profitOrLoss:0})),transactionTotal:I.a.sumBy(r,(function(t){return Math.abs(t.transferFee)+Math.abs(t.acquisitionFee)})),netProfit:I.a.sumBy(r,(function(t){return t.profitOrLoss-(Math.abs(t.transferFee)+Math.abs(t.acquisitionFee))}))})}catch(i){ot(i.message)}},variant:"contained",endIcon:Object(m.jsx)(xt.a,{}),children:"Laske"})]}),T&&0===X.length&&Object(m.jsx)("div",{style:{width:"100%"},children:Object(m.jsx)(Ct,{rows:R,mode:e,rawDataAsColumns:W,rawDatatSetCallback:function(t){return B(t)}})}),X.length>0&&Object(m.jsx)(ft,{rows:X})]}),Object(m.jsx)(h,{})]})]})};i.a.render(Object(m.jsx)(O.a,{basename:"",children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{path:"/",element:Object(m.jsx)(y,{})}),Object(m.jsx)(u.a,{path:"securities",element:Object(m.jsx)(It,{mode:"SECURITY"})}),Object(m.jsx)(u.a,{path:"crypto",element:Object(m.jsx)(It,{mode:"CRYPTO"})})]})}),document.getElementById("root"))}},[[248,1,2]]]);
//# sourceMappingURL=main.f2edf24a.chunk.js.map